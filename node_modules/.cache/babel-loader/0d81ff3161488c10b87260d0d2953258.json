{"ast":null,"code":"import \"core-js/modules/web.atob.js\";\nimport \"core-js/modules/web.dom-exception.constructor.js\";\nimport \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/web.dom-exception.to-string-tag.js\";\nimport VueRouter from 'vue-router';\nimport Login from '../View/Login.vue';\nimport Home from '../components/Home.vue';\nimport Welcome from '../View/Welcom.vue';\nimport User from '../View/User.vue';\nimport Permission from '../View/Permission.vue';\nimport UserList from \"../View/UserList.vue\";\nimport ProductList from \"../View/ProductList.vue\";\nimport Parameters from \"../View/Parameters.vue\";\nimport Classification from \"../View/Classification.vue\";\nimport { List } from 'echarts'; // 创建实例对象\n\nvar router = new VueRouter({\n  routes: [// 引入Login路由\n  {\n    path: '/',\n    component: Login\n  }, {\n    path: '/login',\n    component: Login,\n    meta: {\n      title: '登录'\n    }\n  }, {\n    path: '/home',\n    component: Home,\n    meta: {\n      isAout: true\n    },\n    redirect: '/welcome',\n    children: [{\n      path: '/welcome',\n      component: Welcome\n    }, {\n      path: '/users',\n      component: User\n    }, {\n      path: '/rights',\n      component: Permission\n    }, {\n      path: '/roles',\n      component: UserList\n    }, {\n      path: '/power',\n      component: ProductList\n    }, {\n      path: '/param',\n      component: Parameters\n    }, {\n      path: '/sort',\n      component: Classification\n    }, {\n      path: '/listes',\n      component: UserOrder\n    }]\n  }]\n});\nrouter.beforeEach(function (to, from, next) {\n  if (to.meta.isAout) {\n    // 判断是否有token\n    //  console.log(111);\n    if (sessionStorage.getItem('token')) {\n      // 判断有token是否和服务传的一致\n      var key = window.atob(sessionStorage.getItem('key'));\n      var token = sessionStorage.getItem('token');\n\n      if (key !== token) {\n        next('/login');\n        return;\n      }\n\n      next();\n    } else {\n      next('./login');\n    }\n  } else {\n    next();\n  }\n});\nrouter.afterEach(function (to) {\n  document.title = to.meta.title || \"后台管理系统\";\n}); //向外暴露出去\n\nexport default router;","map":{"version":3,"names":["VueRouter","Login","Home","Welcome","User","Permission","UserList","ProductList","Parameters","Classification","List","router","routes","path","component","meta","title","isAout","redirect","children","UserOrder","beforeEach","to","from","next","sessionStorage","getItem","key","window","atob","token","afterEach","document"],"sources":["E:/houtai/backstage/src/router/index.js"],"sourcesContent":["import VueRouter from 'vue-router'\r\n\r\nimport Login from '../View/Login.vue'\r\nimport Home from '../components/Home.vue'\r\nimport Welcome from '../View/Welcom.vue'\r\nimport User from '../View/User.vue'\r\nimport Permission from '../View/Permission.vue'\r\nimport UserList from \"../View/UserList.vue\";\r\nimport ProductList from \"../View/ProductList.vue\";\r\nimport Parameters from \"../View/Parameters.vue\";\r\nimport Classification from \"../View/Classification.vue\";\r\n\r\n\r\nimport { List } from 'echarts'\r\n// 创建实例对象\r\nconst router = new VueRouter({\r\n  routes: [\r\n    // 引入Login路由\r\n    { path: '/', component: Login },\r\n    { path: '/login', component: Login, meta: { title: '登录' } },\r\n    {\r\n      path: '/home',\r\n      component: Home,\r\n      meta: { isAout: true },\r\n      redirect: '/welcome',\r\n      children: [{\r\n        path: '/welcome',\r\n        component: Welcome\r\n      },\r\n      {\r\n        path: '/users',\r\n        component: User\r\n      },\r\n      {\r\n        path: '/rights',\r\n        component: Permission\r\n      },\r\n      {\r\n        path: '/roles',\r\n        component: UserList\r\n      }, {\r\n        path: '/power',\r\n        component: ProductList\r\n      }, {\r\n        path: '/param',\r\n        component: Parameters\r\n      }, {\r\n        path: '/sort',\r\n        component: Classification\r\n      }, {\r\n        path: '/listes',\r\n        component: UserOrder\r\n      }\r\n      ]\r\n    }\r\n  ]\r\n})\r\nrouter.beforeEach((to, from, next) => {\r\n  if (to.meta.isAout) {\r\n\r\n    // 判断是否有token\r\n    //  console.log(111);\r\n    if (sessionStorage.getItem('token')) {\r\n      // 判断有token是否和服务传的一致\r\n      const key = window.atob(sessionStorage.getItem('key'))\r\n      const token = sessionStorage.getItem('token')\r\n      if (key !== token) {\r\n        next('/login')\r\n        return\r\n      }\r\n      next()\r\n    } else {\r\n      next('./login')\r\n    }\r\n\r\n  } else {\r\n    next()\r\n  }\r\n\r\n})\r\nrouter.afterEach((to) => {\r\n  document.title = to.meta.title || \"后台管理系统\"\r\n})\r\n\r\n//向外暴露出去\r\nexport default router"],"mappings":";;;;AAAA,OAAOA,SAAP,MAAsB,YAAtB;AAEA,OAAOC,KAAP,MAAkB,mBAAlB;AACA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,OAAP,MAAoB,oBAApB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,QAAP,MAAqB,sBAArB;AACA,OAAOC,WAAP,MAAwB,yBAAxB;AACA,OAAOC,UAAP,MAAuB,wBAAvB;AACA,OAAOC,cAAP,MAA2B,4BAA3B;AAGA,SAASC,IAAT,QAAqB,SAArB,C,CACA;;AACA,IAAMC,MAAM,GAAG,IAAIX,SAAJ,CAAc;EAC3BY,MAAM,EAAE,CACN;EACA;IAAEC,IAAI,EAAE,GAAR;IAAaC,SAAS,EAAEb;EAAxB,CAFM,EAGN;IAAEY,IAAI,EAAE,QAAR;IAAkBC,SAAS,EAAEb,KAA7B;IAAoCc,IAAI,EAAE;MAAEC,KAAK,EAAE;IAAT;EAA1C,CAHM,EAIN;IACEH,IAAI,EAAE,OADR;IAEEC,SAAS,EAAEZ,IAFb;IAGEa,IAAI,EAAE;MAAEE,MAAM,EAAE;IAAV,CAHR;IAIEC,QAAQ,EAAE,UAJZ;IAKEC,QAAQ,EAAE,CAAC;MACTN,IAAI,EAAE,UADG;MAETC,SAAS,EAAEX;IAFF,CAAD,EAIV;MACEU,IAAI,EAAE,QADR;MAEEC,SAAS,EAAEV;IAFb,CAJU,EAQV;MACES,IAAI,EAAE,SADR;MAEEC,SAAS,EAAET;IAFb,CARU,EAYV;MACEQ,IAAI,EAAE,QADR;MAEEC,SAAS,EAAER;IAFb,CAZU,EAeP;MACDO,IAAI,EAAE,QADL;MAEDC,SAAS,EAAEP;IAFV,CAfO,EAkBP;MACDM,IAAI,EAAE,QADL;MAEDC,SAAS,EAAEN;IAFV,CAlBO,EAqBP;MACDK,IAAI,EAAE,OADL;MAEDC,SAAS,EAAEL;IAFV,CArBO,EAwBP;MACDI,IAAI,EAAE,SADL;MAEDC,SAAS,EAAEM;IAFV,CAxBO;EALZ,CAJM;AADmB,CAAd,CAAf;AA0CAT,MAAM,CAACU,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;EACpC,IAAIF,EAAE,CAACP,IAAH,CAAQE,MAAZ,EAAoB;IAElB;IACA;IACA,IAAIQ,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAJ,EAAqC;MACnC;MACA,IAAMC,GAAG,GAAGC,MAAM,CAACC,IAAP,CAAYJ,cAAc,CAACC,OAAf,CAAuB,KAAvB,CAAZ,CAAZ;MACA,IAAMI,KAAK,GAAGL,cAAc,CAACC,OAAf,CAAuB,OAAvB,CAAd;;MACA,IAAIC,GAAG,KAAKG,KAAZ,EAAmB;QACjBN,IAAI,CAAC,QAAD,CAAJ;QACA;MACD;;MACDA,IAAI;IACL,CATD,MASO;MACLA,IAAI,CAAC,SAAD,CAAJ;IACD;EAEF,CAjBD,MAiBO;IACLA,IAAI;EACL;AAEF,CAtBD;AAuBAb,MAAM,CAACoB,SAAP,CAAiB,UAACT,EAAD,EAAQ;EACvBU,QAAQ,CAAChB,KAAT,GAAiBM,EAAE,CAACP,IAAH,CAAQC,KAAR,IAAiB,QAAlC;AACD,CAFD,E,CAIA;;AACA,eAAeL,MAAf"},"metadata":{},"sourceType":"module"}